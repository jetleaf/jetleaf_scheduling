<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the DefaultTaskExecutionContext.new constructor from Class DefaultTaskExecutionContext from the jetleaf_scheduling library, for the Dart programming language.">
  <title>DefaultTaskExecutionContext.new constructor - DefaultTaskExecutionContext - jetleaf_scheduling library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">
  
</head>

<body data-base-href="../../" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">jetleaf_scheduling</a></li>
    <li><a href="../../jetleaf_scheduling/">jetleaf_scheduling.dart</a></li>
    <li><a href="../../jetleaf_scheduling/DefaultTaskExecutionContext-class.html">DefaultTaskExecutionContext</a></li>
    <li class="self-crumb">DefaultTaskExecutionContext.new constructor</li>
  </ol>
  <div class="self-name">DefaultTaskExecutionContext.new</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
  <div
      id="dartdoc-main-content"
      class="main-content"
      data-above-sidebar="jetleaf_scheduling&#47;DefaultTaskExecutionContext-class-sidebar.html"
      data-below-sidebar="">
      <div>
<h1><span class="kind-constructor">DefaultTaskExecutionContext</span> constructor 
</h1></div>

    <section class="multi-line-signature">
      
      <span class="name ">DefaultTaskExecutionContext</span>(<wbr>)
    </section>
    
<section class="desc markdown">
  <p>Default implementation of <a href="../../jetleaf_scheduling/TaskExecutionContext-class.html">TaskExecutionContext</a> that provides comprehensive
tracking of task execution history, timing metrics, and exception handling
with full timezone awareness.</p>
<p>This context maintains a complete execution history for scheduled tasks,
including scheduled vs actual execution times, completion timestamps,
exception tracking, and execution counters. It serves as the foundation
for monitoring, debugging, and analytics of scheduled task execution.</p>
<h2 id="features">Features</h2>
<ul>
<li><strong>Execution Timing</strong>: Tracks both scheduled and actual execution times</li>
<li><strong>Exception Tracking</strong>: Records and preserves exceptions from failed executions</li>
<li><strong>Execution Counting</strong>: Maintains total execution count for monitoring</li>
<li><strong>Timezone Awareness</strong>: All timestamps are timezone-aware for accurate reporting</li>
<li><strong>State Management</strong>: Automatically clears exceptions on successful completion</li>
<li><strong>Comprehensive Logging</strong>: Detailed toString() implementation for debugging</li>
</ul>
<h2 id="usage-example">Usage Example</h2>
<pre class="language-dart"><code class="language-dart">final context = DefaultTaskExecutionContext();
final scheduledTime = ZonedDateTime.now();

// Record scheduled execution
context.recordScheduledExecution(scheduledTime);

try {
  // Record actual start of execution
  context.recordActualExecution(ZonedDateTime.now());
  
  // Execute the task logic
  await performScheduledTask();
  
  // Record successful completion
  context.recordCompletion(ZonedDateTime.now());
} catch (e) {
  // Record failure with exception
  context.recordException(e, ZonedDateTime.now());
}

// Access execution metrics
print('Execution count: ${context.getExecutionCount()}');
print('Last exception: ${context.getLastException()}');
print('Last completion: ${context.getLastCompletionTime()}');
</code></pre>
<h2 id="integration-with-task-scheduler">Integration with Task Scheduler</h2>
<p>This context is typically used by task schedulers to track execution
metrics for monitoring and reporting:</p>
<pre class="language-dart"><code class="language-dart">class MonitoringTaskScheduler implements TaskScheduler {
  final Map&lt;String, DefaultTaskExecutionContext&gt; _executionContexts = {};
  
  @override
  Future&lt;void&gt; schedule(Function task, Trigger trigger, {String? taskName}) async {
    final context = _executionContexts[taskName] ??= DefaultTaskExecutionContext();
    final scheduledTime = ZonedDateTime.now();
    
    context.recordScheduledExecution(scheduledTime);
    
    // Schedule the actual execution
    await _executeWithMonitoring(task, context);
  }
  
  Future&lt;void&gt; _executeWithMonitoring(Function task, DefaultTaskExecutionContext context) async {
    context.recordActualExecution(ZonedDateTime.now());
    
    try {
      await task();
      context.recordCompletion(ZonedDateTime.now());
    } catch (e, stackTrace) {
      context.recordException(e, ZonedDateTime.now());
      rethrow;
    }
  }
}
</code></pre>
<h2 id="monitoring-and-analytics">Monitoring and Analytics</h2>
<p>The execution context provides valuable data for monitoring systems:</p>
<pre class="language-dart"><code class="language-dart">class TaskMetricsCollector {
  void collectMetrics(DefaultTaskExecutionContext context, String taskName) {
    final metrics = {
      'task': taskName,
      'execution_count': context.getExecutionCount(),
      'last_scheduled': context.getLastScheduledExecutionTime(),
      'last_actual': context.getLastActualExecutionTime(),
      'last_completion': context.getLastCompletionTime(),
      'has_failure': context.getLastException() != null,
      'last_failure': context.getLastException()?.toString(),
    };
    
    // Send to monitoring system
    metricsSystem.record(metrics);
  }
}
</code></pre>
<h2 id="error-recovery-patterns">Error Recovery Patterns</h2>
<p>Use the context to implement smart error recovery:</p>
<pre class="language-dart"><code class="language-dart">class ResilientTaskExecutor {
  Future&lt;void&gt; executeWithRetry(
    Function task, 
    DefaultTaskExecutionContext context,
    int maxRetries = 3
  ) async {
    for (int attempt = 1; attempt &lt;= maxRetries; attempt++) {
      try {
        context.recordActualExecution(ZonedDateTime.now());
        await task();
        context.recordCompletion(ZonedDateTime.now());
        return; // Success - exit retry loop
      } catch (e) {
        context.recordException(e, ZonedDateTime.now());
        
        if (attempt == maxRetries) {
          rethrow; // Final attempt failed
        }
        
        // Wait before retry
        await Future.delayed(Duration(seconds: attempt * 2));
      }
    }
  }
}
</code></pre>
<h2 id="thread-safety-considerations">Thread Safety Considerations</h2>
<p>This implementation is not thread-safe by default. When used in
concurrent environments, consider:</p>
<ul>
<li>Using in single-threaded contexts only</li>
<li>Adding synchronization for multi-threaded access</li>
<li>Creating thread-local instances</li>
<li>Using atomic operations for counter updates</li>
</ul>
<h2 id="performance-characteristics">Performance Characteristics</h2>
<ul>
<li>Minimal memory footprint for execution tracking</li>
<li>Efficient timestamp recording with ZonedDateTime</li>
<li>Automatic exception clearing reduces memory retention</li>
<li>Suitable for high-frequency task execution</li>
</ul>
<p>Creates a new <a href="../../jetleaf_scheduling/DefaultTaskExecutionContext-class.html">DefaultTaskExecutionContext</a> with initial empty state.</p>
<p>The context starts with no execution history and zero execution count,
ready to track a new task execution lifecycle.</p>
<p>Example:</p>
<pre class="language-dart"><code class="language-dart">// Create a fresh execution context for a new task
final context = DefaultTaskExecutionContext();

// Or create multiple contexts for different tasks
final dailyContext = DefaultTaskExecutionContext();
final hourlyContext = DefaultTaskExecutionContext();
</code></pre>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">DefaultTaskExecutionContext();</code></pre>
</section>


  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">jetleaf_scheduling</a></li>
    <li><a href="../../jetleaf_scheduling/">jetleaf_scheduling</a></li>
    <li><a href="../../jetleaf_scheduling/DefaultTaskExecutionContext-class.html">DefaultTaskExecutionContext</a></li>
    <li class="self-crumb">DefaultTaskExecutionContext.new constructor</li>
</ol>

    <h5>DefaultTaskExecutionContext class</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-left-->
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->
</main>
<footer>
  <span class="no-break">
    jetleaf_scheduling
      1.0.0
  </span>
  
</footer>


<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>

</body>
</html>

